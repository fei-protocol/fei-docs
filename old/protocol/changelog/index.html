<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Changelog - Fei Protocol Docs</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Fei Protocol Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Overview</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../user/user/" class="nav-link">User</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../developers/developers/" class="nav-link">Developer</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../operator/operator/" class="nav-link">Operator</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/fei-protocol/fei-docs/edit/main/docs/old/protocol/changelog.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#changelog" class="nav-link">Changelog</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#fip-5-bonding-curve-allocation-update-may-18-2021" class="nav-link">FIP-5: Bonding Curve Allocation Update - May 18, 2021</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#fip-2-fei-redemption-and-tribe-staking-rewards-april-29-2021" class="nav-link">FIP-2: FEI Redemption and TRIBE Staking Rewards - April 29, 2021</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#pre-launch-feb-2021" class="nav-link">Pre-Launch - Feb 2021</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#white-paper-jan-11-2021" class="nav-link">White paper - Jan 11, 2021</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="changelog">Changelog</h1>
<h2 id="fip-5-bonding-curve-allocation-update-may-18-2021">FIP-5: Bonding Curve Allocation Update - May 18, 2021</h2>
<p>FIP-5 updates the bonding curve allocation to send funds to the <a href="../protocol-controlled-value/ethreservestabilizer/">EthReserveStabilizer</a> via the <a href="../protocol-controlled-value/ethpcvdripper/">EthPCVDripper</a> instead of to the <a href="../protocol-controlled-value/ethuniswappcvdeposit/">EthUniswapPCVDeposit</a> as before.</p>
<p>It also includes an update to the <a href="../protocol-controlled-value/ethuniswappcvdeposit/">EthUniswapPCVDeposit</a> where deposits can only occur when the FEI-ETH spot price is within 1% of the oracle price.</p>
<p><strong>EthPCVDepositAdapter</strong></p>
<p>An adapter contract that allows ETH transfers to conform to the IPCVDeposit interface.</p>
<p>{% page-ref page="protocol-controlled-value/ethpcvdepositadapter.md" %}</p>
<p><strong>RatioPCVController</strong></p>
<p>A PCV controller that allows for withdrawals of a percentage rather than a raw amount of PCV. This is useful for contracts like the <a href="../protocol-controlled-value/ethuniswappcvdeposit/">EthUniswapPCVDeposit</a> where the ETH amount held varies based on market conditions.</p>
<p>{% page-ref page="protocol-controlled-value/ratiopcvcontroller.md" %}</p>
<p>The code for these changes can be found here: <a href="https://github.com/fei-protocol/fei-protocol-core/pull/98">https://github.com/fei-protocol/fei-protocol-core/pull/98</a></p>
<h2 id="fip-2-fei-redemption-and-tribe-staking-rewards-april-29-2021">FIP-2: FEI Redemption and TRIBE Staking Rewards - April 29, 2021</h2>
<p>FIP-2 allows FEI redemption at $0.95 and doubles the FEI-TRIBE LP staking rewards</p>
<p><strong>EthReserveStabilizer</strong></p>
<p>Responsible for exchanging FEI for ETH at $0.95 relative to the UniswapOracle price. Has the Burnerüî•role so that approval is not needed to interact with it. ****Receives ETH in 5k batches from the EthPCVDripper every hour. </p>
<p>{% page-ref page="protocol-controlled-value/ethreservestabilizer.md" %}</p>
<h4 id="ethpcvdripper">EthPCVDripper</h4>
<p>Drips ETH to the EthReserveStabilizer in 5k increments every hour. The dripper prevents the EthReserveStabilizer from holding more than 10k ETH allowing a smoother and safer release of potentially large amounts of ETH to target contracts.</p>
<p>The drip can be called by any address and is not incentivized directly with FEI</p>
<p>300k ETH are sent to the EthPCVDripper from the <a href="../protocol-controlled-value/ethuniswappcvdeposit/">EthUniswapPCVDeposit</a></p>
<p>{% page-ref page="protocol-controlled-value/ethpcvdripper.md" %}</p>
<h4 id="tribedripper">TribeDripper</h4>
<p>When the FeiRewardsDistributor receives new TRIBE, it allocates an amount proportional to all prior drips to the very first drip, frontloading the distribution. If the 100 million TRIBE are sent directly to the distributor then the following week would have 6x rewards (1x base rewards + 100% boost x 5 drips).</p>
<p>To smoothen out the front-loading, the TribeDripper sends the 100 million TRIBE to the FeiRewardsDistributor over 3 weeks using 47m, 31m, and 22m TRIBE respectively.</p>
<p>Week 1: 1x base rewards + 47% boost x 5 drips = ~3.35x<br />
Week 2: 1.47x base rewards + 31% x 6 drips = ~3.33x<br />
Week 3: 1.78x base rewards + 22% x 7 drips = ~3.32x<br />
Week 4+: 2x base rewards</p>
<p>The TribeDripper is at <a href="https://etherscan.io/address/0x65b3Ea26c492de0c2f2D8Abe84eB831796d6eDb1">https://etherscan.io/address/0x65b3Ea26c492de0c2f2D8Abe84eB831796d6eDb1</a> with an unincentivized function drip() that can be called weekly for 3 drips</p>
<h2 id="pre-launch-feb-2021">Pre-Launch - Feb 2021</h2>
<h4 id="guardianrole">Guardianüõ°Role</h4>
<p>The Guardian maintains the ability to revoke roles, and pause certain contracts and methods. It can also force reweights.</p>
<p>{% page-ref page="../governance/fei-guardian.md" %}</p>
<h4 id="thawing">Thawing</h4>
<p>The white paper specification for the Genesis Group doesn‚Äôt address the unintended effect that the average price paid is always lower than the "next price" which is the price that is listed on Uniswap. This creates a perverse incentive to participate in the Genesis Group to arbitrage the group. To solve this we have implemented "thawing" where the list price of FEI/ETH starts at the average genesis price and thaws up to the target peg over 2 weeks.</p>
<p>{% page-ref page="oracles/" %}</p>
<h4 id="allocation">Allocation</h4>
<p>In the white paper, bonding curve purchases of FEI directly fund (ETH) the PCV. Thanks to a recommendation from Ashwin Ramachandran, we are splitting this allocation to Uniswap into a separate flow available for keepers. This lowers bonding curve purchases to around 100k gas, a 66% reduction, making it cheaper than most Uniswap purchases! These batched transactions are always available and incentivized once a day for 500 FEI.</p>
<p>{% page-ref page="bondingcurve/" %}</p>
<h4 id="reweight-reward">Reweight Reward</h4>
<p>PCV reweights receive a flat reward in FEI rather than the percentage approach mentioned in the white paper.</p>
<p>{% page-ref page="protocol-controlled-value/" %}</p>
<h4 id="escape-genesis">Escape Genesis</h4>
<p>In the unlikely event that the GenesisGroup launch function is frozen in a bad state, we‚Äôve added a way to exit back into ETH. This opens 3 days post Genesis.</p>
<p>{% page-ref page="genesis/" %}</p>
<h4 id="pre-swap-tribe">Pre-Swap TRIBE</h4>
<p>To mitigate frontrunning of TRIBE in the DEX offering, we allow users to pre-swap a portion of their Genesis Group FEI stake to buy TRIBE. This gives users the ability to participate in the very first TRIBE purchase at the best IDO price.</p>
<p>{% page-ref page="genesis/" %}</p>
<h4 id="ido-normalization">IDO Normalization</h4>
<p>Given that the pre-swap creates a large slippage and back-running opportunity, a trader could arbitrage the group by joining Genesis and pre-swapping 100% of the FEI for TRIBE with the intention of immediately selling back out.</p>
<p>We now normalize the IDO price <strong>to what the Genesis Group pays including slippage</strong> by burning directly from the pool to prevent this backrunning opportunity.</p>
<p>{% page-ref page="genesis/ido.md" %}</p>
<h4 id="bonding-curve-shift">Bonding Curve Shift</h4>
<p>In the white paper, the bonding curve starts at a 0 price and approaches the peg at the scale target. To achieve lower undercollateralization in the PCV, we‚Äôve added a ‚Äúk‚Äù shift to initiate the bonding curve higher up at an elevated starting price.</p>
<p>{% page-ref page="bondingcurve/" %}</p>
<h4 id="sell-disincentive-burn-calculation">Sell Disincentive (Burn) Calculation</h4>
<p>The current implementation integrates the burn function from the <a href="../../whitepaper/">white paper</a> with respect to the distance from the peg.</p>
<p>{% page-ref page="fei-stablecoin/uniswapincentive.md" %}</p>
<h4 id="router">Router</h4>
<p>A custom Uniswap router that allows the user to bound their buy rewards or sell penalties when trading on the incentivized uniswap pool.</p>
<p>{% page-ref page="trading/" %}</p>
<h2 id="white-paper-jan-11-2021">White paper - Jan 11, 2021</h2>
<p>{% page-ref page="../whitepaper.md" %}</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
